<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
       <form action="#" class="form">
       <label for = "search">search</label>
       <input type="text" name="search" id="search">
       <input type="submit" value="search">
   </form> 

   <p id="test"></p> 
  
</body>

<script>
    

    const form = document.querySelector('.form');
        function search(e) {
            e.preventDefault();
            const text = (this.querySelector('[name=search]')).value;
            getLocation(text);

            console.log(text);
            (this.querySelector('[name=search]')).value = ""
        }
        
        form.addEventListener('submit',search)
        

// function callbackFunction(params) {
//         params.preventDefault();
//         console.log(params.srcElement.value);
//     }

//     form.addEventListener('submit',search);
//     document.getElementById('search').addEventListener(
//         'input',
//         callbackFunction
//     );


            let test = document.querySelector('.test');
            async function getLocation(params) {
            const response = await fetch(`http://localhost:3000/api/location/search/${params}`);
            const data = await response.json();
            t(data);
       
            
           

    
                data.forEach((key, value) => {
                let p = document.createElement('div');
                p.innerHTML = key.title;
                document.body.appendChild(p);
                console.log(key);
            });
            
        }   
        
        
            async function t(data) {
            const res = await fetch(`http://localhost:3000/api/location/${data[0].woeid}`);
            const location = await res.json();
                
               console.log(location);


            
}

</script>
</html>